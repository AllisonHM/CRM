{% extends "base.html" %}
{% block title %}Editar Cliente{% endblock %}

{% block content %}
<style>
    .editar-container {
        max-width: 1000px;
        margin: 30px auto;
        padding: 30px;
        background: #ffffff;
        border-radius: 16px;
        border: 1px solid #e0e0e0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .editar-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #e0e0e0;
    }

    .editar-header h1 {
        font-size: 2rem;
        font-weight: 800;
        color: #00796b;
        margin: 0;
    }

    .btn-group {
        display: flex;
        gap: 10px;
    }

    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.95rem;
        text-decoration: none;
        display: inline-block;
    }

    .btn-salvar {
        background: #00796b;
        color: #ffffff;
    }

    .btn-salvar:hover {
        background: #004d40;
        box-shadow: 0 2px 8px rgba(0, 121, 107, 0.3);
    }

    .btn-cancelar {
        background: #e0e0e0;
        color: #333;
    }

    .btn-cancelar:hover {
        background: #d0d0d0;
    }

    .secao {
        margin-bottom: 30px;
        padding: 20px;
        background: #f5f5f5;
        border-radius: 12px;
        border-left: 4px solid #00796b;
    }

    .secao h2 {
        font-size: 1.2rem;
        font-weight: 700;
        color: #00796b;
        margin: 0 0 20px 0;
        padding-bottom: 10px;
        border-bottom: 1px solid #e0e0e0;
    }

    .campos-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }

    .campo {
        display: flex;
        flex-direction: column;
    }

    .campo label {
        font-weight: 600;
        color: #00796b;
        margin-bottom: 6px;
        font-size: 0.9rem;
    }

    .campo input,
    .campo select,
    .campo textarea {
        padding: 12px;
        background: #ffffff;
        border: 1px solid #d0d0d0;
        border-radius: 8px;
        color: #333;
        font-size: 0.95rem;
        font-family: "Inter", sans-serif;
        transition: all 0.2s ease;
    }

    .campo input:focus,
    .campo select:focus,
    .campo textarea:focus {
        outline: none;
        border-color: #00796b;
        background: #fafafa;
        box-shadow: 0 0 8px rgba(0, 121, 107, 0.2);
    }

    .campo textarea {
        grid-column: 1 / -1;
        resize: vertical;
        min-height: 80px;
    }

    .aviso {
        padding: 15px;
        background: #e3f2fd;
        border-left: 3px solid #1976d2;
        border-radius: 8px;
        color: #333;
        margin-bottom: 20px;
    }

    @media (max-width: 768px) {
        .editar-container {
            padding: 15px;
            margin: 15px;
        }

        .editar-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
        }

        .campos-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="editar-container">
    <div class="editar-header">
        <h1>‚úèÔ∏è Editar Cliente: {{ cliente.nome }}</h1>
        <div class="btn-group">
            <button type="submit" form="formEditar" class="btn btn-salvar">üíæ Salvar Altera√ß√µes</button>
            <a href="{{ url_for('detalhe_cliente_novo', id=cliente.id) }}" class="btn btn-cancelar">‚ùå Cancelar</a>
        </div>
    </div>

    <div class="aviso">
        <strong>‚ÑπÔ∏è Dica:</strong> Preencha apenas os campos que deseja alterar. Os campos deixados em branco manter√£o seus valores anteriores.
    </div>

    <form id="formEditar" method="POST">
        <!-- INFORMA√á√ïES GERAIS -->
        <div class="secao">
            <h2>‚ÑπÔ∏è Informa√ß√µes Gerais</h2>
            <div class="campos-grid">
                <div class="campo">
                    <label>Nome Completo / Raz√£o Social</label>
                    <input type="text" name="nome" value="{{ cliente.nome }}" required>
                </div>

                <div class="campo">
                    <label>Email</label>
                    <input type="email" name="email" value="{{ cliente.email or '' }}">
                </div>

                <div class="campo">
                    <label>Telefone</label>
                    <input type="tel" name="telefone" value="{{ cliente.telefone or '' }}">
                </div>

                <div class="campo">
                    <label>Endere√ßo</label>
                    <input type="text" name="endereco" value="{{ cliente.endereco or '' }}">
                </div>

                <div class="campo">
                    <label>Segmento</label>
                    <input type="text" name="segmento" value="{{ cliente.segmento or '' }}">
                </div>
            </div>
        </div>

        <!-- PESSOA F√çSICA -->
        {% if 'F√≠sica' in cliente.tipo_pessoa or 'PF' in cliente.tipo_pessoa %}
        <div class="secao">
            <h2>üßç Dados Pessoais</h2>
            <div class="campos-grid">
                <div class="campo">
                    <label>Data de Nascimento</label>
                    <input type="date" name="data_nascimento" 
                        {% if cliente.data_nascimento %}value="{{ cliente.data_nascimento.strftime('%Y-%m-%d') }}"{% endif %}>
                </div>

                <div class="campo">
                    <label>Segmento de Trabalho</label>
                    <input type="text" name="segmento_trabalho" value="{{ cliente.segmento_trabalho or '' }}">
                </div>

                <div class="campo">
                    <label>Renda Mensal</label>
                    <input type="number" name="renda" step="0.01" 
                        {% if cliente.renda %}value="{{ cliente.renda }}"{% endif %}>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- PESSOA JUR√çDICA -->
        {% if 'Jur√≠dica' in cliente.tipo_pessoa or 'PJ' in cliente.tipo_pessoa %}
        <div class="secao">
            <h2>üèõÔ∏è Dados da Empresa</h2>
            <div class="campos-grid">
                <div class="campo">
                    <label>Data de Abertura</label>
                    <input type="date" name="data_abertura" 
                        {% if cliente.data_abertura %}value="{{ cliente.data_abertura.strftime('%Y-%m-%d') }}"{% endif %}>
                </div>

                <div class="campo">
                    <label>Quantidade de Funcion√°rios</label>
                    <input type="number" name="qtd_funcionarios" 
                        {% if cliente.qtd_funcionarios %}value="{{ cliente.qtd_funcionarios }}"{% endif %}>
                </div>

                <div class="campo">
                    <label>Faturamento Estimado (R$)</label>
                    <input type="number" name="faturamento" step="0.01" 
                        {% if cliente.faturamento %}value="{{ cliente.faturamento }}"{% endif %}>
                </div>
            </div>
        </div>
        {% endif %}
    </form>

    <div style="margin-top: 30px; padding: 20px; background: #fff3e0; border-left: 3px solid #ff9800; border-radius: 8px;">
        <strong>‚ö†Ô∏è Importante:</strong> As altera√ß√µes ser√£o salvas imediatamente. Verifique se todas as informa√ß√µes est√£o corretas antes de salvar.
    </div>
</div>

{% endblock %}
